<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/style_song.css">
    <script src="https://code.jquery.com/jquery-latest.js"></script>

    <title>Test Audio</title>
</head>

<body>
    <!-- HTML für die Nav-Bar -->
    <div class="overlay-navigation">
        <nav role="navigation">
            <ul>
                <li class="homelink"><a href="https://ida2021-staging.netlify.app/">
                        <svg class="house" version="1.1" id="Ebene_1" xmlns="http://www.w3.org/2000/svg"
                            xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 99.2 99.2"
                            style="enable-background:new 0 0 99.2 99.2;" xml:space="preserve">
                            <g>
                                <path
                                    d="M98.2,47.7l-46-46.7c-1.4-1.4-3.7-1.4-5.1,0L23.8,24.6v-5.4H13.6V35L1,47.7c-1.4,1.4-1.4,3.7,0,5.1l0.1,0.1
                                            		c1.4,1.4,3.7,1.4,5.1,0l40.9-41.4c1.4-1.4,3.7-1.4,5.1,0L93,52.9c1.4,1.4,3.7,1.4,5.1,0l0.1-0.1C99.5,51.4,99.5,49.1,98.2,47.7z" />
                                <polygon
                                    points="13.6,52 13.6,99.2 36.9,99.2 36.9,70.3 62.3,70.3 62.3,99.2 85.6,99.2 85.6,52.7 49.3,15.8 	" />
                            </g>
                        </svg>
                    </a></li>
                <li><a href="index.html">Home</a></li>
                <li><a href="robotmouse.html">Robot</a></li>
                <li class="active"><a href="song.html">Song</a></li>
                <li class="dropdown">
                    <a href="moodboard.html" class="dropbtn">Process</a>
                    <div class="dropdown-content">
                        <a href="myprocess.html">Daily Progress</a>
                        <a href="moodboard.html">Moodboard</a>
                    </div>
                </li>
            </ul>
        </nav>
    </div>
    <section class="home">
        <div class="open-overlay">
            <span class="bar-top"></span>
            <span class="bar-middle"></span>
            <span class="bar-bottom"></span>
        </div>
    </section>

    <li class="last">
        <div>
            <audio id="myAudio" src="assets/audio/1957-audio.mp3"></audio>
            <a onClick="togglePlay()" class="trigger">♪ 1957</a>
        </div>
    </li>
    <li class="credits">
            <a href="credits.html">CREDITS</a>
    </li>



    <!-- HTML für Robot -->
    <audio src="assets/audio/1957-audio.mp3">
        Your browser does not support the
        <code>audio</code> element.
    </audio>

    <div class="head">
    </div>
    <div class="shoulders">
    </div>
    <div class="knees">
    </div>
    <div class="toes">
    </div>
    <div class="fingers">
    </div>
    <div class="lips">
    </div>
    <div class="ears">
    </div>
    <div class="nose">
    </div>
    <div class="eyes">
    </div>
    <div class="arms">
    </div>
    <div class="feet">
    </div>
    <div class="lungs">
    </div>
    <div class="tits">
    </div>
    <div class="heart">
    </div>
    <div class="brain">
    </div>
    <div class="face">
    </div>
    

    <p class="lyrics-1">
        Your house that sits behind be <br>
        Is covered in ivy green <br>
        The windows that we watch from <br>
        are old and chipping at the beam
    </p>
    <p class="lyrics-2">
        It takes me away <br>
        It takes me away <br>
        Takes me away <br>
        It takes me away <br>
        It takes me away <br>
        Takes me away
    </p>
    <p class="lyrics-3">
        the scent you wear moves in lines <br>
        from your appartment into mine <br>
        you act like you don't know me <br>
        my god, you tempt my anxious mind <br>
    </p>
    <p class="lyrics-4">
        Would it be much better if I knew nothing about you? <br>
        Would it be much better if I knew nothing about you? <br>
        Would it be much better if I knew nothing about you? <br>
        Would it be much better if I knew nothing about you? <br>
    </p>
    <p class="lyrics-5">
        I'll go I'll go I'll go I <br>
        I'll go I'll go I'll go I <br>
        I'll go I'll go I'll go I <br>
        I'll go I'll go I'll go I <br>
        I'll go I'll go I'll go I <br>
        I'll go I'll go I'll go I <br>
        I'll go I'll go I'll go I <br>
        I'll go I'll go I'll go I <br>
    </p>
    <p class="lyrics-6">
        I'll go I'll go I'll go I <br>
        I'll go I'll go I'll go I <br>
        I'll go I'll go I'll go I <br>
        I'll go I'll go I'll go I <br>
        I'll go I'll go I'll go I <br>
        I'll go I'll go I'll go I <br>
        I'll go I'll go I'll go I <br>
        I'll go I'll go I'll go I <br>
    </p>
    <p class="lyrics-7">
        It takes me away <br>
        It takes me away <br>
        Takes me away <br>
        It takes me away <br>
        It takes me away <br>
        Takes me away
    </p>
    <p class="lyrics-8">
        It takes me away <br>
        It takes me away <br>
        Takes me away <br>
        It takes me away <br>
        It takes me away <br>
        Takes me away
    </p>
    <p class="lyrics-9">
        Would it be much better <br>
        if I knew nothing about you? <br>
    </p>



    <!-- JS für Robot -->
    <script>
        const audioEle = document.querySelector('audio');

        var dataArray;
        var bufferLength;
        var analyser;

        const fps = 30;


        var isPlaying = false;


        audioEle.addEventListener('play', () => {
            startPlay();
        });

        function startPlay() {
            const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            const audioSourceNode = audioCtx.createMediaElementSource(audioEle);

            let gainNode = audioCtx.createGain();
            audioSourceNode.connect(gainNode);
            gainNode.connect(audioCtx.destination);

            analyser = audioCtx.createAnalyser();
            audioSourceNode.connect(analyser);

            analyser.fftSize = 128;
            bufferLength = analyser.frequencyBinCount;
            dataArray = new Uint8Array(bufferLength);


            draw();
        }

        function togglePlay() {
            isPlaying ? audioEle.pause() : audioEle.play();
        };

        audioEle.onplaying = function () {
            isPlaying = true;
            document.body.classList.remove('paused');
            document.body.classList.add('playing');
        };

        audioEle.onpause = function () {
            isPlaying = false;
            document.body.classList.remove('playing');
            document.body.classList.add('paused');

        };

        function draw() {

            setTimeout(function () {
                requestAnimationFrame(draw);

                analyser.getByteFrequencyData(dataArray); //werte von 0-255

                let sum = 0;

                //mittelwert rechnen
                for (let i = 0; i < bufferLength; i++) {
                    sum += map(dataArray[i], 0, 255, minscale, maxscale);

                }

                document.documentElement.style.setProperty('--scalesize', sum / bufferLength);


            }, 1000 / fps);
        }
        function map(val, in_min, in_max, out_min, out_max) {
            return (val - in_min) * (out_max - out_min) / (in_max - in_min) + out_min;
        }
    </script>
    <script>
        const minscale = 0.3 //dies ist das Minimum der Skalierung - diesen Wert kannst du ändern
        const maxscale = 4; //dies ist das Maximum der Skalierung - diesen Wert kannst du ändern
    </script>


    <!-- JS für NavBar -->
    <script>
        $('.open-overlay').click(function () {
            var overlay_navigation = $('.overlay-navigation'),
                nav_item_1 = $('nav li:nth-of-type(1)'),
                nav_item_2 = $('nav li:nth-of-type(2)'),
                nav_item_3 = $('nav li:nth-of-type(3)'),
                nav_item_4 = $('nav li:nth-of-type(4)'),
                nav_item_5 = $('nav li:nth-of-type(5)'),
                nav_item_6 = $('nav li:nth-of-type(6)'),
                top_bar = $('.bar-top'),
                middle_bar = $('.bar-middle'),
                bottom_bar = $('.bar-bottom');

            overlay_navigation.toggleClass('overlay-active');
            if (overlay_navigation.hasClass('overlay-active')) {

                top_bar.removeClass('animate-out-top-bar').addClass('animate-top-bar');
                middle_bar.removeClass('animate-out-middle-bar').addClass('animate-middle-bar');
                bottom_bar.removeClass('animate-out-bottom-bar').addClass('animate-bottom-bar');
                overlay_navigation.removeClass('overlay-slide-up').addClass('overlay-slide-down')
                nav_item_1.removeClass('slide-in-nav-item-reverse').addClass('slide-in-nav-item');
                nav_item_2.removeClass('slide-in-nav-item-delay-1-reverse').addClass('slide-in-nav-item-delay-1');
                nav_item_3.removeClass('slide-in-nav-item-delay-2-reverse').addClass('slide-in-nav-item-delay-2');
                nav_item_4.removeClass('slide-in-nav-item-delay-3-reverse').addClass('slide-in-nav-item-delay-3');
                nav_item_5.removeClass('slide-in-nav-item-delay-4-reverse').addClass('slide-in-nav-item-delay-4');
                nav_item_6.removeClass('slide-in-nav-item-delay-5-reverse').addClass('slide-in-nav-item-delay-5');
            } else {
                top_bar.removeClass('animate-top-bar').addClass('animate-out-top-bar');
                middle_bar.removeClass('animate-middle-bar').addClass('animate-out-middle-bar');
                bottom_bar.removeClass('animate-bottom-bar').addClass('animate-out-bottom-bar');
                overlay_navigation.removeClass('overlay-slide-down').addClass('overlay-slide-up')
                nav_item_1.removeClass('slide-in-nav-item').addClass('slide-in-nav-item-reverse');
                nav_item_2.removeClass('slide-in-nav-item-delay-1').addClass('slide-in-nav-item-delay-1-reverse');
                nav_item_3.removeClass('slide-in-nav-item-delay-2').addClass('slide-in-nav-item-delay-2-reverse');
                nav_item_4.removeClass('slide-in-nav-item-delay-3').addClass('slide-in-nav-item-delay-3-reverse');
                nav_item_5.removeClass('slide-in-nav-item-delay-4').addClass('slide-in-nav-item-delay-4-reverse');
                nav_item_6.removeClass('slide-in-nav-item-delay-5').addClass('slide-in-nav-item-delay-5-reverse');
            }
        })
    </script>



</body>

</html>